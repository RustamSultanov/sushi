{% extends 'layout.html' %}
{% load static %}


{% block title %}Добавить франчайзи{% endblock %}
{% block page_title %}
    <h2 class="text-light font-weight-normal mt-4 mb-1">Добавить франчайзи </h2>
{% endblock %}

{% block  breadcrumb %}
    {% include 'partials/breadcrumb.html' %}
{% endblock %}
{% block content %}
    <form enctype="multipart/form-data" action="" method="post">
        {% csrf_token %}
        <div class="form-row">
            <div class="form-group col-md-4">
                <label class="form-label">Фамилия</label>
                {{ form_user.last_name }}
            </div>
            <div class="form-group col-md-4">
                <label class="form-label">Имя</label>
                {{ form_user.first_name }}
            </div>
            <div class="form-group col-md-4">
                <label class="form-label">Отчество</label>
                {{ form_user_profile.middle_name }}
            </div>
        </div>
        {% for message in form_user.errors.values %}
            {{ message }}
        {% endfor %}
        {% for message in form_user_profile.errors.values %}
            {{ message }}
        {% endfor %}

        {% block img %}
            <div class="form-group">
                <label class="form-label w-100">Фото</label>
                {{ form_user_profile.avatar }}
            </div>
        {% endblock %}
        <div class="form-group">
            <label class="form-label w-100">Скан паспорта</label>
            {{ form_user_profile.scan }}
        </div>
        {% block employee %}
        {% endblock %}
        <div class="form-group">
            <label class="form-label">Почта</label>
            {{ form_user.email }}
        </div>
        <div class="form-group position-relative">
            <label class="form-label">Телефон</label>
            {{ form_user_profile.phone_number }}
        </div>
        <div class="form-group position-relative">
            <label class="form-label">Whatsapp</label>
            {{ form_user_profile.whatsapp }}
        </div>
        <div class="form-group">
            <label class="form-label">Twitter</label>
            {{ form_user_profile.twitter }}
        </div>
        <div class="form-group">
            <label class="form-label">Facebook</label>
            {{ form_user_profile.facebook }}
        </div>
        <div class="form-group">
            <label class="form-label">Instagram</label>
            {{ form_user_profile.instagram }}
        </div>
        {% if form_user_profile.ddk_number %}
            <div class="form-group">
                <label class="form-label">Номер ДКК</label>
                {{ form_user_profile.ddk_number }}
            </div>
        {% else %}{% endif %}
        {% if form_user_profile.comment and is_visible_comment %}
            <div class="form-group">
                <label class="form-label">Комментарий</label>
                {{ form_user_profile.comment }}
            </div>
        {% endif %}
        {% block create %}
            <div class="form-group">
                <label class="form-label">Логин</label>
                {{ form_user.username }}
            </div>
            <div class="form-group">
                <label class="form-label">Пароль</label>
                {{ form_user.password }}
            </div>
            <div class="form-group">
                <label class="form-label">Повторите пароль</label>
                {{ form_user.password_check }}
            </div>
        {% endblock %}
        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-round">Сохранить</button>
        </div>

    </form>

    {% block extrascripts %}
        <script src="{% static "js/form.js" %}"></script>
        <link rel="stylesheet" href="{% static "libs/select2/select2.css" %}">
        <script src="{% static "libs/select2/select2.js" %}"></script>
        <script>
            function formatState(state) {
                if (!state.id) {
                    return state.text;
                }

                var baseUrl = "{% static "img/flags" %}";
                var $state = $(
                    '<span><img class="img-flag" /> <span></span></span>'
                );

                // Use .text() instead of HTML string concatenation to avoid script injection issues
                $state.find("span").text(state.text);
                $state.find("img").attr("src", baseUrl + "/" + state.element.dataset.iso + ".png");

                return $state;
            };
            $(function () {
                $("#id_user_profile-phone_number_0").select2({
                    templateSelection: formatState,
                    templateResult: formatState,
                });
            });
            $(function () {
                $("#id_user_profile-whatsapp_0").select2({
                    templateSelection: formatState,
                    templateResult: formatState,
                });
            });
        </script>
    {% endblock %}
{% endblock %}